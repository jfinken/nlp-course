

<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8" />
<title>Assignment Details</title>

<link rel="stylesheet" href="https://class.coursera.org/assets/core/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://class.coursera.org/assets/core/css/main.css" />
<link rel="stylesheet" href="https://spark-public.s3.amazonaws.com/nlp/static/css/main.css" />
<link rel="stylesheet" href="https://class.coursera.org/assets/core/css/font-awesome.css" />
<script type="text/javascript" src="https://class.coursera.org/assets/core/js/jquery.js"></script>
<script type="text/javascript" src="https://class.coursera.org/assets/core/js/json.js"></script>
<script type="text/javascript" src="https://class.coursera.org/assets/core/js/hc_fix.js"></script>
<script src="https://class.coursera.org/assets/core/js/bootstrap/bootstrap-modal.js" type="text/javascript"></script>
<script src="https://class.coursera.org/assets/core/js/modal_focus.js" type="text/javascript"></script>
<script src="https://class.coursera.org/assets/core/js/bind_modal_focus.js" type="text/javascript"></script>
<script src="https://class.coursera.org/assets/core/js/mathjax2/MathJax.js?config=default"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28377374-1']);
  _gaq.push(['_setDomainName', 'coursera.org']);
  _gaq.push(['_setAllowLinker', true]);  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><link rel="icon" href="https://spark-public.s3.amazonaws.com/nlp/static/images/favicon.ico" />

</head>

<body>

    <a href="#page-content" class="hidden">Skip Navigation</a>

	
<div class="topbar">
    <div class="topbar-inner">
        <div class="container-fluid"
                          >
            <a target="_new" href="http://www.coursera.org/" class="brand">
				Coursera				<span style="background-color:#387690;padding-top:100px" class="label warning">Beta</span>
			</a>
            <ul class="nav secondary-nav">
                                                    <li style="padding: 10px 10px 11px; color:#BFBFBF; font-size:14px; border-right: solid 1px #333">Lonna Torano</li>
                    <li><a href="https://class.coursera.org/nlp/class/preferences">Preferences</a></li>
                    <li><a href="http://www.coursera.org/">All Courses</a></li>

                                        
                    
                    <li><a href="https://class.coursera.org/nlp/class/aboutus">About</a></li>
                    <li><a href="https://class.coursera.org/nlp/auth/feedback">Contact Us</a></li>
                    <li><a href="https://class.coursera.org/nlp/auth/logout">Logout</a></li>
                            </ul>
        </div>
    </div>
</div>


    <div id="banner-top">
    	<div id="course-logo-text">
        	<a href="https://class.coursera.org/nlp/class/index">
        		<img border="0" alt="Natural Language Processing" src="https://spark-public.s3.amazonaws.com/nlp/static/images/course-logo-text.png" />
        	</a>
        </div>
    	<div id="banner-course-info">
        	<div class="course-instructor-name">Dan Jurafsky, <span style="font-weight:normal">Professor of Linguistics</span><br />
Chris Manning, <span style="font-weight:normal">Associate Professor  of Computer Science</span></div>
            <div class="course-time"></div>
        </div>
    </div>
    
        <div class="container-fluid">
        <div class="sidebar page-sidebar" id="page-sidebar">
            <ul style="list-style-type:none;margin-left:0px;">
		<li>
        <a href="https://class.coursera.org/nlp/class/index"  >
            <p class="navbar_item navbar_home">Home            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/wiki/view?page=syllabus"  >
            <p class="navbar_item navbar_wiki">Syllabus            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/wiki/view?page=courselogistics"  >
            <p class="navbar_item navbar_wiki">Course Logistics            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/wiki/view?page=FAQlist"  >
            <p class="navbar_item navbar_wiki">FAQ List            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/"  >
            <p class="navbar_item navbar_">            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/quiz/index"  >
            <p class="navbar_item navbar_quiz">Problem Sets            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/assignment/index"  >
            <p class="navbar_item navbar_assignment">Programming Assignments            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/lecture/index"  >
            <p class="navbar_item navbar_lecture">Video Lectures            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/wiki/view?page=lectureslides"  >
            <p class="navbar_item navbar_lecture">Lecture Slides            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/forum/index"  >
            <p class="navbar_item navbar_forum">Discussion Forums            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/"  >
            <p class="navbar_item navbar_">            </p>
        </a>
    </li>
		<li>
        <a href="https://class.coursera.org/nlp/wiki/view?page=aboutus"  >
            <p class="navbar_item navbar_wiki">About Us            </p>
        </a>
    </li>
		<li>
        <a href="http://www.universalsubtitles.org/en/teams/coursera/p/nlp"  >
            <p class="navbar_item navbar_wiki">Help with Subtitles            </p>
        </a>
    </li>
	</ul>
        </div>
        <div class="content page-content" id="page-content">
            <h2>PA4 NER &mdash; View Assignment</h2>

<table style="margin-top: 10px">
	<tbody>
        <tr>
			<th style="width: 240px">Assignment Name</th>
			<td>PA4 NER</td>
		</tr>
		<tr>
			<th>Due Date</th>
			<td>Tue 17 Apr 2012 11:59:00 PM PDT</td>
		</tr>
		<tr>
			<th>Hard Deadline</th>
			<td>Fri 11 May 2012 11:59:00 PM PDT</td>
		</tr>
		<tr>
			<th>Submission</th>
			<td>Go to <a href="https://class.coursera.org/nlp/assignment/list">Assignments List</a> page to submit your solutions.</td>
		</tr>
		<tr>
			<th>Instructions</th>
			<td><html>
<BODY BGCOLOR = #ffffff >

<h1>Homework 4: Person Name ('Named Entity') Classification <a href="http://spark-public.s3.amazonaws.com/nlp/homework/pa4-ner-v8.tar.gz">[starter code]</a></h1>

<table BORDER=0 CELLPADDING=3 WIDTH="100%" BGCOLOR="#217292" >
<tr>
<td><b><font color="#FFFFFF"><font size=+1>Due: Tuesday April 10 11:59pm Pacific Daylight Time</font></font></b></td>
</tr>
</table>

<p>
For this assignment, you will be building a maximum entropy Markov model
(MEMM) for identifying person
names in newswire text.  We have provided all of the machinery for training
and testing your MEMM, but we have left the feature set woefully inadequate.
Your job is to modify the code for generating features so that it produces a
much more sensible, complete, and higher-performing set of features.

<p>
If you're programming in Python, please use Python 2.6 or higher because the program uses JSON module that was introduced in version 2.6. Also, you're required to have Java working on your system because a significant amount of the starter codes are written in Java. However, you do not need to worry about the Java part because we provide the commands to compile and run the program.

<h2>Starter Code</h2>
<p>
 In the starter code we have provided you
with three simple starter features, but you should be able to improve
substantially on them.  We recommend experimenting with orthographic
information, gazeteers, and the surrounding words, and we also encourage you to
think beyond these suggestions. 

<P>
For Java, the file you will be modifying is <code>FeatureFactory.java</code>.  The class
currently looks something like this:

<pre>
public class FeatureFactory {

  private static List&lt;String&gt; computeFeatures(List&lt;String&gt; words, String previousLabel, int position) {

    List&lt;String&gt; features = new ArrayList&lt;String&gt;();
    
    String currentWord = words.get(position);

    // Baseline Features
    features.add("word=" + currentWord);
    features.add("prevLabel=" + previousLabel);
    features.add("word=" + currentWord + ", prevLabel=" + previousLabel);

    // TODO: Add your features here
    
    return features;
  }
}
</pre>

For Python, the file you will be modifying is <code>FeatureFactory.py</code>. 
<pre>
def computeFeatures(self, words, previousLabel, position):
        features = []
        currentWord = words[position]

        """ Baseline Features """
        features.append("word=" + currentWord)
        features.append("prevLabel=" + previousLabel)
        features.append("word=" + currentWord + ", prevLabel=" + previousLabel)

        """ TODO: Add your features here """

        return features
</pre>


<h2>Adding Features to the Code</h2>

You will create the features for the word at the given position, with the
given previous label.  You may condition on any word in the sequence (and its
relative position), not just
the current word, because they are all observed.  You may not condition on any
labels other than the previous one. 

<p>
Each function you build will be a binary function of some kind of feature.
The features are stored in a list because we are using a <i>sparse</i>
representation.  Features which have a value of <i>true</i> (or
<code>1.0</code>) will be present in the list and everything not present is
assumed to be false (or <code>0.0</code>).

<p>
The argument to <code>features.add()</code> in Java or <code>features.append()</code> in Python is the name of the feature.
You need to give a unique name for each feature. The system will use this unique name in training to set the weight for that feature. At testing time the system will use the name of this feature and its weight to make a classification decision.

<p>
Consider the following sample feature:
<pre>
features.add("word="+currentWord);
</pre>
and imagine that the current word is "Oakland".

<p>
This means "I am a binary function that is true if the current word is 'Oakland'".
For every such feature you write, the code will take this function and
actually learn two separate weights
for this feature: one for "label=PERSON" and one for "label=O".

<p>
So just by specifying this feature, the system will  learn two functions, call them f1 and f2,
where f1, which means
	"I am a binary function that is true if the current word is 'Oakland' and the output label is 'Person'"
will get a low weight, and f2, which means
	"I am a binary function that is true if the current word is 'Oakland' and the output label is 'O''"
will get a high weight.  You can think of the name of both f1 and f2
as the string "word=Oakland" and not worry about the fact that we are learning
two separate weights.  Then, when the system is running on a test sentence that has
the word Oakland, it will call your code to create the feature "word=Oakland",
and it will automatically create two features, "word=Oakland,label=PERSON"
and "word=Oakland,label=O", and it will use those weights in the classifier.

<p>
Similarly, this sample feature:

<pre>
features.add("word=Jenny, prevLabel=O");
</pre>
will create two features, each with its own weight, one for
"word=Jenny, prevLabel=O, label=PERSON"
and one for
"word=Jenny, prevLabel=O, label=O".

<h2>Types of features to include</h2>

Your features should not just be the words themselves. 
The features can represent any property of the word, context, or
additional knowledge.
<p>
For example, the case of a word is a good predictor for a person's name, 
so you might want to add a feature to capture whether a given
word was lowercase, Titlecase, CamelCase, ALLCAP, etc.
<p>
Imagine you saw the word 'Jenny'. In addition to the 
feature for the word itself (as above), you could add a feature to indicate it was in
Title case, like:
<br />
for Java,
<pre>
if (Character.isUpperCase(currentwWord.charAt(0))) {
     features.add("case=Title");
}
</pre>

for Python,
<pre>
if currentWord[0].isupper():
     features.append("case=Title")
</pre>

It will create two features, each with its own weight, one for
"case=Title, label=PERSON"
and one for
"case=Title, label=O".

It is easy to see why this helps. You might encounter an unknown word in
the test set, but if you know it begins with a capital letter then this
might be evidence that helps with the correct prediction.

<p>
Choosing the correct features is an important part 
of natural language processing. It is as much art as science: 
some trial and error is inevitable, but you should 
see your accuracy increasing as you add new types of features.

<p>
The name of a feature is not different from an ID number. You can use assign any name for a feature as long as it is unique. For example, you can use "Titlecase" instead of "case=Title".


<h2> Running the Program</h2>
<p>
For Java, execute
<pre>
$ cd java
$ mkdir classes
$ javac *.java org/json/*.java -d classes -target 1.6
$ java -cp classes -Xmx1G NER ../data/train ../data/dev
</pre>

Similarly for Python, execute
<pre>
$ cd python
$ mkdir classes
$ javac *.java org/json/*.java -d classes
$ python NER.py ../data/train ../data/dev
</pre>

<p>
We have provided you with a training set, called <code>train</code> and a
developemnt test set called <code>dev</code>.  We will be running your
programs on an unseen test set, so you should try to make your features as
general as possible.  Your goal should be to increase F1, which is the
harmonic mean of the precision and the recall.  If you run the program as-is,
you should get the following score:

<pre>
precision = 0.802
recall = 0.522
F1 = 0.633
</pre>

<p>
When you run the program, you will see it print out a lot of information as it
does the optimization, and you can pretty much ignore that.  Afterwards, it
will print out your score as above.  You can give it an additional flag,
<code>-print</code> and have it print the test set along with the real answers
and your guesses.  The first column is the word, the second column is the true
answer, and the third column is your program's guess.  This should help you do
error analysis to see what kinds of things you are getting right, and what
kind you are getting wrong.  This will help you properly target your features.
<p>
For Java, execute
<pre>
$ java -cp classes -Xmx1G NER ../data/train ../data/dev -print
</pre>

For Python, execute
<pre>
$ python NER.py ../data/train ../data/dev -print
</pre>

<h2>Submission</h2>


<p>
For Java, execute
<pre>
$ cd java
$ mkdir classes
$ javac *.java org/json/*.java -d classes
$ java -cp classes -Xmx1G Submit
</pre>

For Python, execute
<pre>
$ cd python
$ mkdir classes
$ javac *.java org/json/*.java -d classes
$ python submit.py 
</pre>

When you encounter "Out of Heap Space" problem in the attempt to run or submit the program in Java, increase the heap size by using "-Xmx2G" instead of "-Xmx1G" option.<br/><br/>


It is important that these scripts be executed from either the java or python directories so that they can easily import the code you've written and so that the relative path "../data/" correctly points to the training data. It is hard-coded into the submission scripts. You are allowed to submit as many times as you want. We will take the max of your scores. 

The submission takes twice longer than the usual running time of your program since your program will be run for both dev and test data sets. Please make sure to allow enough time for the submit script to run. 
<br />
<h2>Grading</h2>

The assignment will be graded based on its F-scores on both development and held-out data sets. 10 points will be given to the performance of each data set. For the development data set, achieving 70% F-score would be fairly easy and 80% would require a reasonable amount of work. If you're achieving above 89%, it's very impressive. Please use these numbers as a ball park and be careful not to over-fit your features to the development data set. 

<br /><br />

<h2>Tips</h2>
<ul>
<li>Start early. This assignment may take longer than the previous assignments if you're aiming for the perfect score.</li>
<li>Generalize your features. For example, if you're adding the above "case=Title" feature, think about whether there is any pattern that is not captured by the feature. Would the "case=Title" feature capture "O'Gorman"? </li>
<li>When you add a new feature, think about whether it would have a positive or negative weight for PERSON and O tags (these are the only tags for this assignment). </li>
<li>"-print" option is useful when you want compare the differences of the predictions before and after adding new features. </li>
</ul>

</body>
</html>
</td>
		</tr>
	</tbody>
</table>
        </div>
    </div>
            <div class="hidden">
        This page features MathJax technology to render mathematical formulae.
        If you are using a screen reader, please visit <a href="http://www.dessci.com/en/products/mathplayer/">MathPlayer</a> to download the plugin for your browser. Please note that this is an Internet Explorer-only plugin at this time.
    </div>
</body>

</html>
